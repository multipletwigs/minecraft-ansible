#!/bin/bash
# Fabric Minecraft Server start script
# Generated by Ansible

cd {{ server_dir }}

# Construct Java command with optimal flags for modded Minecraft
JAVA_CMD="java -Xms{{ java_xms }} -Xmx{{ java_xmx }} {% for flag in java_flags %}{{ flag }} {% endfor %}-jar fabric-server-mc.{{ minecraft_version }}-loader.{{ fabric_loader }}-launcher.{{ fabric_launcher }}.jar nogui"

echo "Starting Fabric Minecraft Server ({{ minecraft_version }}) with Fabric Loader {{ fabric_loader }}..."
echo "Server directory: {{ server_dir }}"
echo "Memory allocation: {{ java_xms }} (min) to {{ java_xmx }} (max)"

# Log the startup
echo "Server started at $(date)" >> server_starts.log

# Execute the Java command
exec ${JAVA_CMD}
